# vim: set ft=ruby:

search do
  prune_dirs /\A(\.svn|\.git|\.terraform|CVS|tmp|coverage|corpus|pkg|\.yardoc|doc)\z/
  skip_files /(\A\.|\.sw[pon]\z|\.(log|fnm|jpg|jpeg|png|pdf|svg)\z|\A(cscope\.out|tags)\z|~\z)/i
end

discover do
  prune_dirs /\A(\.svn|\.git|\.terraform|\.yardoc|CVS|tmp|coverage|corpus|pkg|\.yardoc|doc)\z/
  skip_files /(\A\.|\.sw[pon]\z|\.log\z|\A(cscope\.out|tags)\z|~\z)/
  index_expire_after 3_600
end

strip_spaces do
  prune_dirs /\A(\..*|CVS|pkg|\.yardoc)\z/
  skip_files /(\A\.|\.sw[pon]\z|\.log\z|~\z)/
end

probe do
  test_framework  :'test-unit'
  server_type     :unix
  tcp_server_port 59999
end

ssh_tunnel do
  terminal_multiplexer :tmux
  login_session "/home/#{ENV['USER']}"
  env(
    FOO: 'test'
  )
end

classify do
  shift_path_by_default 1
end

code_indexer do
  verbose true
  gems = %w[
    all_images
    amatch
    base64
    bigdecimal
    complex_config
    context_spook
    date
    debug
    excon
    gem_hadar
    infobar
    json
    kramdown-ansi
    logger
    mize
    ollama-ruby
    ostruct
    parser
    pstree
    rake
    search_ui
    simplecov
    stringio
    sync
    term-ansicolor
    tins
    unix_socks
    utils
    webrick
    yard
  ]
  paths {
    %w[ lib ] + gems.map { `bundle show #{it}` }.map(&:chomp)
  }
end
