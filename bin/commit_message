#!/usr/bin/env ruby

require 'utils'

config = Utils::ConfigDir.new('commit_message', env_var: 'XDG_CONFIG_HOME')

branch = `git rev-parse --abbrev-ref HEAD`.chomp
exec 'ollama_cli', '-c', "#{config}/client.json",
  '-M', "#{config}/options.json", '-P', "branch=#{branch}",
  '-s', "#{config}/system.txt", '-p', "#{config}/prompt.txt"
