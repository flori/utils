#!/usr/bin/env ruby

require 'utils'

paths = %w[ . ] + `bundle list --paths`.lines.map(&:chomp)
cmd = %w[ ctags --recurse=yes --languages=Ruby,C ] + paths
b = Utils::Busybar.new('Creating tags').spin { system *cmd }
if megabytes = File.size('tags').to_f / 1024 ** 2 rescue nil
  b.puts 'Created %.3fM of tags.' % megabytes
end
